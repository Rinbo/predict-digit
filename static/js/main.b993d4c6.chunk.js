(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(t,e,n){t.exports=n.p+"static/media/T1.b05cf698.txt"},150:function(t,e,n){t.exports=n.p+"static/media/T2.c98098b1.txt"},151:function(t,e,n){t.exports=n.p+"static/media/T3.606ab021.txt"},152:function(t,e,n){},153:function(t,e,n){},154:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(45),u=n.n(c),o=n(17),i=n(5),l=n(27),s=n.n(l),f=n(46),d=function(t){return p(t)},p=function(){var t=Object(f.a)(s.a.mark(function t(e){var n,r,a,c,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:return r=t.sent,a=r.trim(),c=a.split(/\n/),u=c.map(function(t){return t.split(",")}),t.abrupt("return",u);case 13:throw t.prev=13,t.t0=t.catch(0),console.log(t.t0),t.t0;case 17:case"end":return t.stop()}},t,null,[[0,13]])}));return function(e){return t.apply(this,arguments)}}(),h=n(4),m=function(t){for(var e=t.map(function(t){return Math.ceil(t/255)}),n=b(e,6),r=b(n,28),a=b(r,6).map(function(t){for(var e=[],n=0;n<28;n++)for(var r=0;r<t.length;r++)e[n]=[].concat(e[n]||[],t[r].splice(0,1));return e.map(function(t){return g(t)})}),c=[],u=function(t){c[t]=[],a.forEach(function(e){c[t].push(e[t])})},o=0;o<28;o++)u(o);return c.flat()},b=function(t,e){return t.reduce(function(t,n,r){var a=Math.floor(r/e);return t[a]||(t[a]=[]),t[a].push(n),t},[])},g=function(t){return t.map(function(t){return t.reduce(function(t,e){return t+e})}).reduce(function(t,e){return t+e})/36},v=function(t){var e=t.setImageData,n=t.setInputVector,c=t.setShowPrediction,u=Object(r.useState)(!1),o=Object(i.a)(u,2),l=o[0],s=o[1],f=Object(r.useRef)(null),d=Object(r.useRef)(null);Object(r.useEffect)(function(){f.current.width=168,f.current.height=168,d.current=f.current.getContext("2d")},[]);var p=function(t){s(!0);var e=g(t);d.current.lineTo(e.x,e.y),d.current.stroke()},b=function(){s(!1),d.current.beginPath(),x(d.current.getImageData(0,0,168,168))},g=function(t){var e=f.current.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}},v=function(t){if(l){var e=g(t);d.current.lineWidth=12,d.current.lineCap="round",d.current.strokeStyle="black",d.current.lineTo(e.x,e.y),d.current.stroke(),d.current.beginPath(),d.current.moveTo(e.x,e.y)}},x=function(t){var r=function(t,e){var n=t.data.filter(function(t,e){return(e+1)%4===0}),r=m(Object(h.a)(n));e(r);for(var a=[],c=0;c<r.length;c++)for(var u=0;u<4;u++)3!==u?a.push(0):a.push(r[c]);var o=new Uint8ClampedArray(a);return new ImageData(o,28,28)}(t,n);c(!0),e(r)};return a.a.createElement("div",{className:"flex flex-col justify-center",style:{height:240}},a.a.createElement("canvas",{className:"myCanvas",ref:f,onMouseDown:function(t){return p(t)},onMouseUp:function(){return b()},onMouseMove:function(t){return v(t)},onTouchStart:function(t){return p(t)},onTouchEnd:function(){return b()},onTouchMove:function(t){return v(t)}}),a.a.createElement("div",null,a.a.createElement("button",{className:"btn btn-green",style:{margin:10},onClick:function(){d.current.clearRect(0,0,168,168),c(!1)}},"Erase")))},x=function(t,e){if(t.length!==e.length)throw new Error("Vectors must have the same length");for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n},y=function(t){return t.map(function(t){return t>0?t:.01*t})},j=function(t){var e=Math.max.apply(Math,Object(h.a)(t)),n=t.map(function(t){return Math.exp(t-e)}),r=n.reduce(function(t,e){return t+e});return n.map(function(t){return t/r})},O=n(47),E=function(t){var e,n,r,c=t.prediction;return a.a.createElement(O.a,{data:{labels:[1,2,3,4,5,6,7,8,9,0],datasets:[{label:"Probability",backgroundColor:"rgba(33,186,69,0.2)",borderColor:"rgba(33,186,69,1)",borderWidth:1,defaultFontColor:"#cccccc",hoverBackgroundColor:"rgba(33,186,69,0.4)",hoverBorderColor:"rgba(33,186,69,1)",data:c.map(function(t){return Math.floor(100*t)})}]},options:(e=null,n=null,r=Math.max.apply(Math,Object(h.a)(c.map(function(t){return Math.floor(100*t)})))||90,{legend:{display:!1},scales:{xAxes:[{display:!0,gridLines:{display:!1,color:"#cccccc"},scaleLabel:{display:!1,labelString:e}}],yAxes:[{display:!0,gridLines:{display:!1,color:"rgba(204, 204, 204, 0.5)"},scaleLabel:{display:!1,labelString:n},ticks:{autoSkip:!1,min:0,max:r+(10-r%10)}}]},maintainAspectRatio:!1})})},w=function(t){var e=t.scaledImage,n=t.inputVector,c=t.thetaMatrices,u=t.showPrediction,o=Object(r.useState)([0,0,0,0,0,0,0,0,0,0]),l=Object(i.a)(o,2),s=l[0],f=l[1];return Object(r.useEffect)(function(){u?n&&f(function(t,e){t.unshift(1);var n=y(e.T1.map(function(e){return x(e,t)}));n.unshift(1);var r=y(e.T2.map(function(t){return x(t,n)}));return r.unshift(1),j(e.T3.map(function(t){return x(t,r)}))}(n,c)):f([0,0,0,0,0,0,0,0,0,0])},[e,n,c,u]),a.a.createElement("div",{className:"flex flex-col justify-start",style:{height:240}},a.a.createElement("div",{className:"text-3xl",style:{height:50}},u?"Predicted digit: ".concat(s.indexOf(Math.max.apply(Math,Object(h.a)(s)))+1===10?0:s.indexOf(Math.max.apply(Math,Object(h.a)(s)))+1):""),a.a.createElement("div",null,a.a.createElement(E,{prediction:s})))},M=n(149),T=n(150),k=n(151),S=function(){var t=Object(r.useState)(null),e=Object(i.a)(t,2),n=e[0],c=e[1],u=Object(r.useState)(null),l=Object(i.a)(u,2),s=l[0],f=l[1],p=Object(r.useState)(!1),h=Object(i.a)(p,2),m=h[0],b=h[1],g=Object(r.useState)({T1:null,T2:null,T3:null}),x=Object(i.a)(g,2),y=x[0],j=x[1];return Object(r.useEffect)(function(){d(M).then(function(t){return j(function(e){return Object(o.a)({},e,{T1:t})})}),d(T).then(function(t){return j(function(e){return Object(o.a)({},e,{T2:t})})}),d(k).then(function(t){return j(function(e){return Object(o.a)({},e,{T3:t})})})},[]),a.a.createElement("div",{className:"container mx-auto"},a.a.createElement("div",{className:"text-center"},a.a.createElement("h1",{className:"bg-green-500 m-6 p-6 rounded shadow-lg text-lg"},"Predict the digit!"),a.a.createElement("div",{className:"text-base mb-12"},"Write a single digit in the box and see if the neural network can predict which number you drew."),a.a.createElement("div",{className:"flex flex-wrap justify-center content-center"},a.a.createElement(v,{setImageData:c,setInputVector:f,setShowPrediction:b}),a.a.createElement(w,{scaledImage:n,inputVector:s,thetaMatrices:y,showPrediction:m}))))};n(152),n(153);u.a.render(a.a.createElement(S,null),document.getElementById("root"))},49:function(t,e,n){t.exports=n(154)}},[[49,1,2]]]);
//# sourceMappingURL=main.b993d4c6.chunk.js.map