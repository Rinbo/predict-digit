(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,n){e.exports=n.p+"static/media/T1.b05cf698.txt"},150:function(e,t,n){e.exports=n.p+"static/media/T2.c98098b1.txt"},151:function(e,t,n){e.exports=n.p+"static/media/T3.606ab021.txt"},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(45),u=n.n(c),o=n(17),i=n(5),l=n(27),s=n.n(l),f=n(46),m=function(e){return d(e)},d=function(){var e=Object(f.a)(s.a.mark(function e(t){var n,r,a,c,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.text();case 6:return r=e.sent,a=r.trim(),c=a.split(/\n/),u=c.map(function(e){return e.split(",")}),e.abrupt("return",u);case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}(),p=n(4),h=function(e){for(var t=e.map(function(e){return Math.ceil(e/255)}),n=b(t,6),r=b(n,28),a=b(r,6).map(function(e){for(var t=[],n=0;n<28;n++)for(var r=0;r<e.length;r++)t[n]=[].concat(t[n]||[],e[r].splice(0,1));return t.map(function(e){return v(e)})}),c=[],u=function(e){c[e]=[],a.forEach(function(t){c[e].push(t[e])})},o=0;o<28;o++)u(o);return c.flat()},b=function(e,t){return e.reduce(function(e,n,r){var a=Math.floor(r/t);return e[a]||(e[a]=[]),e[a].push(n),e},[])},v=function(e){return e.map(function(e){return e.reduce(function(e,t){return e+t})}).reduce(function(e,t){return e+t})/36},g=function(e){var t=e.setImageData,n=e.setInputVector,c=e.setShowPrediction,u=Object(r.useState)(!1),o=Object(i.a)(u,2),l=o[0],s=o[1],f=Object(r.useRef)(null),m=Object(r.useRef)(null);Object(r.useEffect)(function(){f.current.width=168,f.current.height=168,m.current=f.current.getContext("2d")},[]);var d=function(e){s(!0);var t=v(e);m.current.lineTo(t.x,t.y),m.current.stroke()},b=function(){s(!1),m.current.beginPath(),x(m.current.getImageData(0,0,168,168))},v=function(e){var t=f.current.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},g=function(e){if(l){var t=v(e);m.current.lineWidth=12,m.current.lineCap="round",m.current.strokeStyle="black",m.current.lineTo(t.x,t.y),m.current.stroke(),m.current.beginPath(),m.current.moveTo(t.x,t.y)}},x=function(e){var r=function(e,t){var n=e.data.filter(function(e,t){return(t+1)%4===0}),r=h(Object(p.a)(n));t(r);for(var a=[],c=0;c<r.length;c++)for(var u=0;u<4;u++)3!==u?a.push(0):a.push(r[c]);var o=new Uint8ClampedArray(a);return new ImageData(o,28,28)}(e,n);c(!0),t(r)};return a.a.createElement("div",{className:"flex flex-col justify-center",style:{height:240}},a.a.createElement("canvas",{className:"myCanvas",ref:f,onMouseDown:function(e){return d(e)},onMouseUp:function(){return b()},onMouseMove:function(e){return g(e)},onTouchStart:function(e){return function(e){var t=e.touches[0],n=new MouseEvent("mousedown",{clientX:t.clientX,clientY:t.clientY});d(n)}(e)},onTouchEnd:function(){return new MouseEvent("mouseup",{}),void b()},onTouchMove:function(e){return function(e){var t=e.touches[0],n=new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY});g(n)}(e)}}),a.a.createElement("div",null,a.a.createElement("button",{className:"btn btn-green  ",style:{margin:10},onClick:function(){m.current.clearRect(0,0,168,168),c(!1)}},"Erase")))},x=function(e,t){if(e.length!==t.length)throw new Error("Vectors must have the same length");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n},y=function(e){return e.map(function(e){return e>0?e:.01*e})},j=function(e){var t=Math.max.apply(Math,Object(p.a)(e)),n=e.map(function(e){return Math.exp(e-t)}),r=n.reduce(function(e,t){return e+t});return n.map(function(e){return e/r})},E=n(47),w=function(e){var t,n,r,c=e.prediction;return a.a.createElement(E.a,{data:{labels:[1,2,3,4,5,6,7,8,9,0],datasets:[{label:"Probability",backgroundColor:"rgba(33,186,69,0.2)",borderColor:"rgba(33,186,69,1)",borderWidth:1,defaultFontColor:"#cccccc",hoverBackgroundColor:"rgba(33,186,69,0.4)",hoverBorderColor:"rgba(33,186,69,1)",data:c.map(function(e){return Math.floor(100*e)})}]},options:(t=null,n=null,r=Math.max.apply(Math,Object(p.a)(c.map(function(e){return Math.floor(100*e)})))||90,{legend:{display:!1},scales:{xAxes:[{display:!0,gridLines:{display:!1,color:"#cccccc"},scaleLabel:{display:!1,labelString:t}}],yAxes:[{display:!0,gridLines:{display:!1,color:"rgba(204, 204, 204, 0.5)"},scaleLabel:{display:!1,labelString:n},ticks:{autoSkip:!1,min:0,max:r+(10-r%10)}}]},maintainAspectRatio:!1})})},O=function(e){var t=e.scaledImage,n=e.inputVector,c=e.thetaMatrices,u=e.showPrediction,o=Object(r.useState)([0,0,0,0,0,0,0,0,0,0]),l=Object(i.a)(o,2),s=l[0],f=l[1];return Object(r.useEffect)(function(){u?n&&f(function(e,t){e.unshift(1);var n=y(t.T1.map(function(t){return x(t,e)}));n.unshift(1);var r=y(t.T2.map(function(e){return x(e,n)}));return r.unshift(1),j(t.T3.map(function(e){return x(e,r)}))}(n,c)):f([0,0,0,0,0,0,0,0,0,0])},[t,n,c,u]),a.a.createElement("div",{className:"flex flex-col justify-start",style:{height:240}},a.a.createElement("div",{className:"text-3xl",style:{height:50}},u?"Predicted digit: ".concat(s.indexOf(Math.max.apply(Math,Object(p.a)(s)))+1===10?0:s.indexOf(Math.max.apply(Math,Object(p.a)(s)))+1):""),a.a.createElement("div",null,a.a.createElement(w,{prediction:s})))},M=n(149),T=n(150),k=n(151),S=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(null),l=Object(i.a)(u,2),s=l[0],f=l[1],d=Object(r.useState)(!1),p=Object(i.a)(d,2),h=p[0],b=p[1],v=Object(r.useState)({T1:null,T2:null,T3:null}),x=Object(i.a)(v,2),y=x[0],j=x[1];return document.addEventListener("touchmove",function(e){"myCanvas"===e.target.className&&e.preventDefault()},{passive:!1}),Object(r.useEffect)(function(){m(M).then(function(e){return j(function(t){return Object(o.a)({},t,{T1:e})})}),m(T).then(function(e){return j(function(t){return Object(o.a)({},t,{T2:e})})}),m(k).then(function(e){return j(function(t){return Object(o.a)({},t,{T3:e})})})},[]),a.a.createElement("div",{className:"container mx-auto"},a.a.createElement("div",{className:"text-center"},a.a.createElement("h1",{className:"bg-green-500 m-6 p-6 rounded shadow-lg text-lg"},"Predict the digit!"),a.a.createElement("div",{className:"text-base mb-12"},"Write a single digit in the box and see if the neural network can predict which number you drew."),a.a.createElement("div",{className:"flex flex-wrap justify-center content-center"},a.a.createElement(g,{setImageData:c,setInputVector:f,setShowPrediction:b}),a.a.createElement(O,{scaledImage:n,inputVector:s,thetaMatrices:y,showPrediction:h}))))};n(152),n(153);u.a.render(a.a.createElement(S,null),document.getElementById("root"))},49:function(e,t,n){e.exports=n(154)}},[[49,1,2]]]);
//# sourceMappingURL=main.dcb45246.chunk.js.map